import 'package:hetu_script/hetu_script.dart';
import 'ht_library_script_binding.dart';
{{#user_api_import}}
import {{import_file}};
{{/user_api_import}}

class HetuScriptBinding extends HetuLibraryScriptBinding {
  @override
  Function? funcWrap(positionalArgs, namedArgs) {
    var f = super.funcWrap(positionalArgs, namedArgs);
    if (f != null) {
      return f;
    }
    String functionType = positionalArgs[0];
    HTFunction function = positionalArgs[1];
    switch (functionType) {
    }
    return null;
  }

  @override
  void loadAutoBinding(HTInterpreter interpreter) {
    super.loadAutoBinding(interpreter);
    var bindings = {
      {{#user_bindings}}
      '{{dart_class_name}}' : {{prefix}}{{dart_class_name}}HTBinding(),
      {{/user_bindings}}
    };
    bindings.forEach((key, value) {
      interpreter.bindExternalClass(key, value);
    });
  }

  @override
  Future loadAutoBindingScripts(HTInterpreter interpreter, String path) {
    var future = super.loadAutoBindingScripts(interpreter, path);
    var futures = <Future>[];
    futures.add(future);
    {{#ht_user_bindings}}
    futures.add(interpreter.import(path + '/{{ht_file_relative_path}}'));
    {{/ht_user_bindings}}
    return Future.wait(futures);
  }
}